(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{129:(e,r,a)=>{"use strict";a.d(r,{N:()=>n});var t=a(1564),s=a(5603);let l=s.env.NEXT_PUBLIC_SUPABASE_URL||"",o=s.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"",i=o||"placeholder-key";l&&o||console.warn("Supabase environment variables are not set"),o&&(o.includes("service_role")||o.length>200)&&console.error("ERROR: You are using the service role key instead of the anon key! The service role key should NEVER be used in the browser. Please use NEXT_PUBLIC_SUPABASE_ANON_KEY from your Supabase project settings.");let n=(0,t.UU)(l||"https://placeholder.supabase.co",i,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:{getItem:e=>{try{return window.localStorage.getItem(e)}catch(e){return console.error("Error reading from localStorage:",e),null}},setItem:(e,r)=>{try{window.localStorage.setItem(e,r)}catch(e){console.error("Error writing to localStorage:",e)}},removeItem:e=>{try{window.localStorage.removeItem(e)}catch(e){console.error("Error removing from localStorage:",e)}}},storageKey:"supabase.auth.token",flowType:"pkce"}})},1558:(e,r,a)=>{"use strict";a.d(r,{Ay:()=>n,gV:()=>s,lM:()=>i});let t=(0,a(1618).Z0)({name:"user",initialState:{userRole:"default",userId:"",email:"",firstName:"",lastName:"",isAuthenticated:!1},reducers:{setUser:(e,r)=>{e.userId=r.payload.userId,e.email=r.payload.email,e.firstName=r.payload.firstName,e.lastName=r.payload.lastName,e.userRole=r.payload.userRole||"default",e.isAuthenticated=!0},setUserRole:(e,r)=>{e.userRole=r.payload},setUserId:(e,r)=>{e.userId=r.payload},clearUser:e=>{e.userRole="default",e.userId="",e.email="",e.firstName="",e.lastName="",e.isAuthenticated=!1}}}),{setUser:s,setUserRole:l,setUserId:o,clearUser:i}=t.actions,n=t.reducer},1632:()=>{},2010:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>k});var t=a(8481),s=a(8526),l=a(5978),o=a(1618),i=a(1558);let n=(0,o.Z0)({name:"profile",initialState:{profileImageDataUrl:"",imageKey:"",profileImageChanged:!1},reducers:{setProfileImageDataUrl:(e,r)=>{e.profileImageDataUrl=r.payload},setImageKey:(e,r)=>{e.imageKey=r.payload},setProfileImageChanged:(e,r)=>{e.profileImageChanged=r.payload},clearProfile:e=>{e.profileImageDataUrl="",e.imageKey="",e.profileImageChanged=!1}}}),{setProfileImageDataUrl:u,setImageKey:c,setProfileImageChanged:d,clearProfile:m}=n.actions,h=n.reducer,g=(0,o.U1)({reducer:{user:i.Ay,profile:h}});var f=a(2343),w=a.n(f),p=a(5603);let N=(0,s.createContext)({loading:!0,allFeatureFlags:void 0});function x(e){let{children:r}=e,[a,l]=(0,s.useState)({loading:!0,allFeatureFlags:void 0});return(0,s.useEffect)(()=>{let e=p.env.NEXT_PUBLIC_FLAGSMITH_ENV_KEY;if(!e)return void l({loading:!1,allFeatureFlags:void 0});w().init({environmentID:e,onChange:()=>{l({loading:!1,allFeatureFlags:w().getAllFlags()})}})},[]),(0,t.jsx)(N.Provider,{value:a,children:r})}var E=a(2471),y=a(129),I=a(3646);function v(e){let{children:r}=e,a=(0,E.j)(),[l,o]=(0,s.useState)(!1),n=(0,s.useCallback)(async e=>{try{let s=await I.v.getProfile(e);if(s)a((0,i.gV)({userId:s.id,email:s.email,firstName:s.first_name,lastName:s.last_name,userRole:s.role}));else{let e=await I.v.getCurrentUser();if(e){var r,t;a((0,i.gV)({userId:e.id,email:e.email||"",firstName:(null==(r=e.user_metadata)?void 0:r.first_name)||"",lastName:(null==(t=e.user_metadata)?void 0:t.last_name)||"",userRole:"default"}))}}}catch(r){console.error("Error loading user profile:",r);let{data:{session:e}}=await y.N.auth.getSession();e||a((0,i.lM)())}},[a]);return(0,s.useEffect)(()=>{let e=!0,r=!1,{data:{subscription:t}}=y.N.auth.onAuthStateChange(async(t,s)=>{var u;e&&(console.log("Auth state changed:",t,null==s||null==(u=s.user)?void 0:u.id),"INITIAL_SESSION"===t?(r=!0,(null==s?void 0:s.user)?(console.log("Session restored from storage, loading profile..."),await n(s.user.id)):(console.log("No session found in storage"),a((0,i.lM)())),e&&o(!0)):"SIGNED_IN"===t||"TOKEN_REFRESHED"===t?((null==s?void 0:s.user)&&await n(s.user.id),e&&!l&&o(!0)):"SIGNED_OUT"===t&&(a((0,i.lM)()),e&&o(!0)))}),s=async()=>{if(await new Promise(e=>setTimeout(e,100)),e)try{let{data:{session:t},error:s}=await y.N.auth.getSession();if(s){console.error("Error getting session:",s),e&&(a((0,i.lM)()),o(!0));return}!r&&((null==t?void 0:t.user)&&e?(console.log("Session found on manual check, loading profile..."),await n(t.user.id)):e&&(console.log("No session found on manual check"),a((0,i.lM)())),e&&o(!0))}catch(r){console.error("Error checking session:",r),e&&(a((0,i.lM)()),o(!0))}},u=setTimeout(()=>{s()},200);return()=>{e=!1,clearTimeout(u),t.unsubscribe()}},[a,n,l]),(0,t.jsx)(t.Fragment,{children:r})}var _=a(1451),S=a(5297),b=a(7622),A=a(8273),P=a(8695),U=a(4133);function j(e){let{trackingEventCategory:r}=e;return(0,t.jsxs)("footer",{className:"relative w-full h-[150px]",style:{backgroundColor:"#050a1f"},children:[(0,t.jsxs)("div",{className:"absolute text-center h-[34.67px] top-[51px] left-1/2 -translate-x-1/2 flex items-center gap-2.5",children:[(0,t.jsx)(_.A,{href:"https://www.linkedin.com/company/techplusuw/","aria-label":"Tech Plus LinkedIn",target:"_blank",rel:"noopener noreferrer",className:"text-white mx-2.5",children:(0,t.jsx)(S.A,{})}),(0,t.jsx)(_.A,{href:"https://twitter.com/techplusuw","aria-label":"Tech Plus Twitter",target:"_blank",rel:"noopener noreferrer",className:"text-white mx-2.5",children:(0,t.jsx)(b.A,{})}),(0,t.jsx)(_.A,{href:"mailto:techplusuw@gmail.com","aria-label":"Tech Plus Email",className:"text-white mx-2.5",children:(0,t.jsx)(A.A,{})}),(0,t.jsx)(_.A,{href:"https://www.facebook.com/techplusuw","aria-label":"Tech Plus Facebook",target:"_blank",rel:"noopener noreferrer",className:"text-white mx-2.5",children:(0,t.jsx)(P.A,{})}),(0,t.jsx)(_.A,{href:"https://www.instagram.com/techplusuw","aria-label":"Tech Plus Instagram",target:"_blank",rel:"noopener noreferrer",className:"text-white mx-2.5",children:(0,t.jsx)(U.A,{})})]}),(0,t.jsxs)("div",{className:"absolute text-center top-[63.37%] bottom-[11.63%] text-white left-1/2 -translate-x-1/2",children:["\xa9 Tech+ UW ",new Date().getFullYear()]})]})}function k(e){let{children:r}=e;return(0,t.jsx)("html",{lang:"en",children:(0,t.jsx)("body",{className:"flex flex-col min-h-screen",children:(0,t.jsx)(l.Kq,{store:g,children:(0,t.jsx)(v,{children:(0,t.jsxs)(x,{children:[(0,t.jsx)("div",{className:"flex-1",children:r}),(0,t.jsx)(j,{})]})})})})})}a(1632)},2471:(e,r,a)=>{"use strict";a.d(r,{G:()=>l,j:()=>s});var t=a(5978);let s=()=>(0,t.wA)(),l=t.d4},3646:(e,r,a)=>{"use strict";a.d(r,{v:()=>l});var t=a(129);class s{async signUp(e){let{email:r,password:a,firstName:s,lastName:l}=e,{data:o,error:i}=await t.N.auth.signUp({email:r,password:a,options:{data:{first_name:s,last_name:l}}});if(i)throw Error(i.message);if(!o.user)throw Error("Failed to create user");if(o.session){let{error:e}=await t.N.from("profiles").insert({id:o.user.id,email:r,first_name:s,last_name:l});e&&console.error("Profile creation error:",e)}return o}async signIn(e){let{email:r,password:a}=e,{data:s,error:l}=await t.N.auth.signInWithPassword({email:r,password:a});if(l)throw Error(l.message);return s}async signOut(){let{error:e}=await t.N.auth.signOut();if(e)throw Error(e.message)}async resetPassword(e){let r="".concat(window.location.origin,"/reset-password"),{error:a}=await t.N.auth.resetPasswordForEmail(e,{redirectTo:r});if(a)throw Error(a.message)}async updatePassword(e){let{error:r}=await t.N.auth.updateUser({password:e});if(r)throw Error(r.message)}async getCurrentUser(){let{data:{user:e},error:r}=await t.N.auth.getUser();if(r)throw Error(r.message);return e}async getProfile(e){let{data:r,error:a}=await t.N.from("profiles").select("*").eq("id",e).single();if(a){if("PGRST116"===a.code)return null;throw Error(a.message)}return r}async updateProfile(e,r){let{data:a,error:s}=await t.N.from("profiles").update({...r,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw Error(s.message);return a}}let l=new s},7043:(e,r,a)=>{Promise.resolve().then(a.bind(a,2010))}},e=>{e.O(0,[675,134,10,618,451,355,59,498,358],()=>e(e.s=7043)),_N_E=e.O()}]);